<!DOCTYPE html>
<html id="htmls">
<head>
    <meta charset="UTF-8">
    <title>{{title1}}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <link rel="icon" href="" type="image/x-icon">
    <link rel="stylesheet" href="../../css/reset.css" type="text/css">
    <link rel="stylesheet" href="../../css/template2.css" type="text/css">
    <link rel="stylesheet" href="../../css/Vuejs-01.css" type="text/css">
    <link rel="stylesheet" href="../../plug-in/syntaxhighlighter/css/shCoreMidnight.css" type="text/css">
    <style type="text/css">
        .btn {
        	width: 80px;
        	height: 30px;
        	border-radius: 5px;
        }
        .table {
        	width: 80%;
        	margin: 0 auto;
        	border: 1px solid white;
        }
        .table tr {
        	height: 30px;
        }
        .table th,
        .table td {
        	text-align: center;
        }
        .table th {
        	font-size: 16px;
        }
        .table td {
        	font-size: 14px;
        }
    </style>
</head>
<body>
   	<div class="wrap">
		<div class="main">
			<!-- 章 -->
			<div class="section">
				<h2 class="h2-title">{{title1}}</h2>
				<div class="study-content">
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">AJAX的优势</h4>
								<ol class="h4-ol">
									<li>异步加载数据，无需切换页面。</li>
									<li>更佳的用户体验：局部刷新、及时验证、操作步骤简化等。</li>
									<li>节省流量。</li>
									<li>JS控制数据的加载，更加灵活多用。</li>
								</ol>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">基本API比喻</h4>
								<ul class="h4-ul">
									<li>new XMLHttpRequest()—————→买了一个新手机</li>
									<li>open(method, url, asyn）  —————→输入要拨打的电话</li>
									<li>send(data)—————→播出</li>
									<li>onload—————→拨号成功</li>
									<li>responseText—————→对方的应答</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">步骤</h4>
								<div class="code-type">原生JavaScript:</div>
								<pre id="code" name="code" class="brush:js">
									var xhr = new XMLHttpRequest(); // 创建一个ajax对象
										xhr.open("get", "http://www.baidu.com", true); //确定即将连接的网址及方式 method：String，采用post/get形式请求; url：String，要连接的网址; asyn：Boolean，是否发起异步请求
										xhr.send(null); // 要发送给服务器的数据 data：String或Null.该参数将被发送给服务器。如果发送空数据，则传null
										xhr.onload = function() { //ajax请求成功后的回调
											console.log("成功")
											console.log(xhr.responseText) // 服务器返回的数据，请求之前为空(返回的是string)
										}
								</pre>
								<div class="code-type">jQuery:</div>
								<pre id="code" name="code" class="brush:js">
									$ajax({
										type: "get",
										url: "../../data/test.txt",
										success: function(data) {
											console.log(data)
										}
									})
								</pre>
							</div>
						</div>
					</div>
					<div class="demos n-dcom">
						<div class="demos-content">
							<div class="knowledge-point">
								<h4 class="h4-title">demo:</h4>
								<button class="btn">加载text</button>
								<div class="show-text"></div>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">$ajax(options)的参数</h4>
								<table border="1" class="table">
									<thead>
										<tr>
											<th>序号</th>
											<th>参数名称</th>
											<th>类型</th>
											<th>说明</th>
										</tr>
									</thead>
									<tbody>
										<tr v-for="option in options">
											<td>{{$index+1}}</td>
											<td>{{option.name}}</td>
											<td>{{option.type}}</td>
											<td>{{option.explain}}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">JSON与XML</h4>
								<ol class="h4-ol">
									<li>JSON与XML都是常见的数据格式</li>
									<li>JSON（JavaScript Object Notation）轻量级数据格式</li>
									<li>XML是一种可扩展标记语言，与HTML都是标记语言</li>
								</ol>
								<div class="code-type">JSON:</div>
								<pre id="code" name="code" class="brush:js">
									{
										"name": "小明",
										"age": "20",
										"class": "2班"
									}
								</pre>
								<div class="code-type">XML:</div>
								<pre id="code" name="code" class="brush:js">
									&lt? xml version="1.0" encoding="ISO-8859-1" ?>
									<people>
										<name>小明</name>
										<age>20</age>
										<class>2班</class>
									</people>
								</pre>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">JSON的优势:</h4>
								<ol class="h4-ol">
									<li>轻量级，体积小，节省流量，提高加速度；</li>
									<li>J解析成原生JS对象，解析比XML快；</li>
									<li>查找数据无效查找标签</li>
								</ol>
								<h4 class="h4-title">JSON的劣势:</h4>
								<ol class="h4-ol">
									<li>在古老浏览器如IE7-中不支持原生JSON解析，需要引入第三方库的支持</li>
								</ol>
								<h4 class="h4-title">JSON的常见格式</h4>
								<div class="code-type">JSON对象:</div>
								<pre id="code" name="code" class="brush:js">
									{
										"name": "小明",
										"age": "20",
										"class": "2班",
										"brother": [
											{
												"name": "小强",
												"age": "22",
												"class": "3班"
											},
											{
												"name": "小华",
												"age": "21",
												"class": "5班"
											}
										]
									}
								</pre>
								<div class="code-type">JSON数组:</div>
								<pre id="code" name="code" class="brush:js">
									[
										{
											"name": "小强",
											"age": "22",
											"class": "3班" ,
											"friend": [
												{
													"name": "小华",
													"age": "21",
													"class": "5班"
												},{
													"name": "小乐",
													"age": "21",
													"class": "5班"
												}
											]
										},{
											"name": "小叶",
											"age": "22",
											"class": "5班" ,
											"friend": [
												{
													"name": "小华",
													"age": "21",
													"class": "5班"
												},{
													"name": "小乐",
													"age": "21",
													"class": "5班"
												}
											]
										}
									]
								</pre>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">JSON转换方法：</h4>
								<pre id="code" name="code" class="brush:js">
									JSON.parse(string);//将JSON字符串string转换为JS对象
									JSON.stringify(obj);//将JS对象转换为JSON字符串
								</pre>
							</div>
						</div>
					</div>
					<div class="notes n-dcom">
						<div class="notes-content">
							<div class="knowledge-point">
								<h4 class="h4-title">GET与POST的区别：</h4>
								<div class="code-type">GET:</div>
								<ol class="h4-ol">
									<li>更常用，更方便；</li>
									<li>性能好；</li>
									<li>明文发送，没有POST安全</li>
									<li>传输数据大小有限制：数据通过URL传递，但是URL有一定长度限制。</li>
								</ol>
								<div class="code-type">POST:</div>
								<ol class="h4-ol">
									<li>使用相对较少</li>
									<li>性能只有GET的三分之一左右；</li>
									<li>比GET稍微安全一点；</li>
									<li>传输数据没有大小限制。</li>
								</ol>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
   	</div>
   
    <script charset="utf-8" src="../../js/jquery-1.11.3.min.js" type="text/javascript"></script>
    <script charset="utf-8" src="../../js/common.js" type="text/javascript"></script>
    <script charset="utf-8" src="../../js/vue.min.js" type="text/javascript"></script>
    <!-- <script charset="utf-8" src="../../js/template.js" type="text/javascript"></script> -->
    <script charset="utf-8" src="../../plug-in/syntaxhighlighter/js/shCore.js"></script>
    <script charset="utf-8" src="../../plug-in/syntaxhighlighter/js/shBrushXml.js" type="text/javascript"></script>
    <script charset="utf-8" src="../../plug-in/syntaxhighlighter/js/shBrushJScript.js" type="text/javascript"></script>
    <script charset="utf-8" src="../../plug-in/syntaxhighlighter/shAutoloader.js" type="text/javascript"></script>
    <script type="text/javascript">
	 	(function() {
 		 	SyntaxHighlighter.autoloader(
 				['js','jscript','javascript','../../plug-in/syntaxhighlighter/js/shBrushJScript.js'],
 				['css','../../plug-in/syntaxhighlighter/js/shBrushCss.js'],
 				['xml','html','../../plug-in/syntaxhighlighter/js/shBrushXml.js'],
 				['sql','../../plug-in/syntaxhighlighter/js/shBrushSql.js'],
 				['php','../../plug-in/syntaxhighlighter/js/shBrushPhp.js']
 			); 
 			SyntaxHighlighter.defaults['toolbar'] = false;//是否显示工具栏
 			SyntaxHighlighter.defaults['tab-size'] = 4;//自定义tab宽度
 			SyntaxHighlighter.defaults['html-script'] = false;//混合高亮HTML和js
 			SyntaxHighlighter.defaults['gutter'] = true;//是否显示行号
 			// SyntaxHighlighter.defaults['highlight'] = 1;//标记重要的行
 			SyntaxHighlighter.all();//这里的‘code’ 为上面放置代码的容器 
	 	})();
	 	(function() {
	 		var vm = new Vue({
	 			el: "#htmls",
	 			data: {
	 				title1: "AJAX及JSON",
	 				options: [{
	 					name: "url",
	 					type: "string",
	 					explain: "发送请求的url"
	 				},{
	 					name: "type",
	 					type: "string",
	 					explain: "'get'或'post'"
	 				},{
	 					name: "success",
	 					type: "function",
	 					explain: "请求成功后的回调函数"
	 				},{
	 					name: "data",
	 					type: "string或object",
	 					explain: "要发送给服务器的数据。如：'name=aa&age=11'或者{name:'aa',age:'11'}"
	 				},{
	 					name: "timeout",
	 					type: "number",
	 					explain: "请求超时时间（毫秒）"
	 				},{
	 					name: "dataType",
	 					type: "string",
	 					explain: "服务器返回的数据类型。如果是特殊的格式JQ会进行预解析和兼容性修复。可选值：'xml','html','script','json','jsonp','text'"
	 				},{
	 					name: "beforeSend",
	 					type: "function",
	 					explain: "在发送请求前，可以添加自定义头部信息等操作。如：function(xhr){xhr;//XMLHttpRequest对象}"
	 				},{
	 					name: "complete",
	 					type: "function",
	 					explain: "ajax请求完成后的回调函数，无论成功与失败"
	 				},{
	 					name: "error",
	 					type: "function",
	 					explain: "失败的回调函数"
	 				},{
	 					name: "global",
	 					type: "boolean",
	 					explain: "是否触发全局的ajax事件"
	 				}]
	 			}
	 		})
	 	})();

		(function() {
			$(".btn").click(function() {
				var xhr = new XMLHttpRequest(); // 创建一个ajax对象
					xhr.open("get", "../../data/test.html", true); //确定即将连接的网址及方式 method：String，采用post/get形式请求; url：String，要连接的网址; asyn：Boolean，是否发起异步请求
					xhr.send(null); // 要发送给服务器的数据 data：String或Null.该参数将被发送给服务器。如果发送空数据，则传null
					$(".show-text").html("正在加载...")
					xhr.onload = function() { //ajax请求成功后的回调
						// console.log("成功")
						$(".show-text").html(xhr.responseText)
						console.log(typeof xhr.responseText)//返回来的是string
					}
			})
		})()
    	// $(".show-text").html("正在加载")
    	// window.onload = function() {
    	// 	$(".show-text").hide()
    	// }
    </script>
</body>
</html>